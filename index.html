<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Second Brain Lab Â· SBL Toolkit</title>
  <style>
    :root {
      --bg: #0b1020; --bg2: #0f1730; --card: #0f1a33;
      --text: #e9eefc; --muted: #b9c3e6; --line: rgba(255,255,255,.10);
      --accent: #6ea8ff; --r: 18px;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0; font-family: -apple-system, system-ui, sans-serif;
      color: var(--text); background: linear-gradient(180deg, var(--bg), var(--bg2));
      min-height: 100vh;
    }
    .wrap { max-width: 1000px; margin: 0 auto; padding: 28px 18px; }
    header {
      display: flex; align-items: center; justify-content: space-between;
      padding: 14px 16px; border: 1px solid var(--line); border-radius: var(--r);
      background: rgba(255,255,255,.04); backdrop-filter: blur(10px);
    }
    .btn {
      border: 1px solid var(--line); background: rgba(255,255,255,.06); color: var(--text);
      padding: 10px 16px; border-radius: 12px; cursor: pointer; font-weight: 900; font-size: 13px;
    }
    .btn.primary { background: var(--accent); color: #fff; border: none; }
    .hero { margin: 40px 0 24px; text-align: center; }
    .hero h1 { font-size: 36px; margin-bottom: 12px; }
    .hero p { color: var(--muted); }
    .authbar {
      margin: 20px 0; display: flex; align-items: center; justify-content: space-between;
      padding: 16px 20px; border: 1px solid var(--line); border-radius: var(--r);
      background: rgba(255,255,255,.02);
    }
    /* 4ê°œ ë°°ì¹˜ë¥¼ ìœ„í•´ 2ì—´ ê·¸ë¦¬ë“œë¡œ ë³€ê²½ */
    .grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px; margin-top: 24px; }
    .card {
      border: 1px solid var(--line); border-radius: var(--r);
      background: rgba(255,255,255,.05); padding: 28px; opacity: 0.4; filter: grayscale(1);
      transition: 0.3s ease; text-align: center;
    }
    .card.unlocked { opacity: 1; filter: grayscale(0); border-color: var(--accent); }
    .card h2 { margin-top: 0; }
    .action {
      display: block; margin-top: 20px; padding: 12px; border-radius: 12px;
      text-decoration: none; font-weight: 900; color: #666; background: #222;
      pointer-events: none; transition: 0.2s;
    }
    .action.active { background: var(--accent); color: #fff; pointer-events: auto; }
    footer { margin-top: 60px; text-align: center; font-size: 12px; opacity: 0.4; }
    @media (max-width: 700px) { .grid { grid-template-columns: 1fr; } }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div style="font-weight:900; letter-spacing:-0.5px;">SBL Toolkit</div>
      <div>
        <button class="btn primary" id="loginBtn">Google ë¡œê·¸ì¸</button>
        <button class="btn" id="logoutBtn" style="display:none;">ë¡œê·¸ì•„ì›ƒ</button>
      </div>
    </header>

    <section class="hero">
      <h1 id="hTitle">ì—…ë¬´ìš© íˆ´í‚·</h1>
      <p id="hMsg">ì§€ì •ëœ ê´€ë¦¬ì ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸í•´ ì£¼ì„¸ìš”.</p>
    </section>

    <div class="authbar">
      <div id="userInfo" style="font-weight:700;">ì ‘ì† ëŒ€ê¸° ì¤‘...</div>
      <div id="statusChip" style="font-size:12px; color:var(--muted)">GUEST</div>
    </div>

    <section class="grid">
      <div class="card" id="c1">
        <h2>ğŸ“š ë¶ë§ˆí¬</h2>
        <p style="font-size:0.9rem; color:var(--muted); margin-bottom:0;">ì—…ë¬´ìš© ë§í¬ ëª¨ìŒ</p>
        <a class="action" id="a1" href="./bookmark/">ì‹¤í–‰í•˜ê¸°</a>
      </div>
      <div class="card" id="c2">
        <h2>ğŸ“° IT ë‰´ìŠ¤</h2>
        <p style="font-size:0.9rem; color:var(--muted); margin-bottom:0;">RSS ë‰´ìŠ¤ ë¦¬ë”</p>
        <a class="action" id="a2" href="./it-news/">ì‹¤í–‰í•˜ê¸°</a>
      </div>
      <div class="card" id="c3">
        <h2>ğŸ§¾ Tracker</h2>
        <p style="font-size:0.9rem; color:var(--muted); margin-bottom:0;">ì¸ì‚¬ì´íŠ¸ ì•„ì¹´ì´ë¹™</p>
        <a class="action" id="a3" href="./tracker/">ì‹¤í–‰í•˜ê¸°</a>
      </div>
      <div class="card" id="c4">
        <h2>ğŸ¯ ë¹…ìŠ¤í†¤</h2>
        <p style="font-size:0.9rem; color:var(--muted); margin-bottom:0;">ì—°ê°„ ëª©í‘œ & ë§Œë‹¤ë¼íŠ¸</p>
        <a class="action" id="a4" href="./bitstone/">ì‹¤í–‰í•˜ê¸°</a>
      </div>
    </section>

    <footer>&copy; Second Brain Lab. ì—…ë¬´ ì „ìš© ê³µê°„ì…ë‹ˆë‹¤.</footer>
  </div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-app.js";
    import { getAuth, GoogleAuthProvider, signInWithPopup, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-auth.js";

    // í†µí•©ëœ firebaseConfig
    const firebaseConfig = {
      apiKey: "AIzaSyAd08tVXgWZ2_dg3jzvhawmH4jtolRmfhY",
      authDomain: "itnews-82b60.firebaseapp.com",
      databaseURL: "https://itnews-82b60-default-rtdb.firebaseio.com",
      projectId: "itnews-82b60",
      storageBucket: "itnews-82b60.firebasestorage.app",
      messagingSenderId: "719267588761",
      appId: "1:719267588761:web:3c4607cb799620f9446608"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const ALLOWED = "eundang@gmail.com";

    document.getElementById("loginBtn").onclick = () => signInWithPopup(auth, new GoogleAuthProvider());
    document.getElementById("logoutBtn").onclick = () => signOut(auth);

    onAuthStateChanged(auth, (user) => {
      const isAllowed = user && user.email.toLowerCase() === ALLOWED;
      // c4, a4 ì¶”ê°€ë¨
      const ids = ["c1","c2","c3","c4"];
      const btnIds = ["a1","a2","a3","a4"];

      if (isAllowed) {
        document.getElementById("hTitle").innerText = "ë°˜ê°‘ìŠµë‹ˆë‹¤, ëŒ€í‘œë‹˜";
        document.getElementById("hMsg").innerText = "SBL Toolkitì˜ ëª¨ë“  ê¶Œí•œì´ í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤.";
        document.getElementById("userInfo").innerText = user.displayName + " (" + user.email + ")";
        document.getElementById("statusChip").innerText = "ê´€ë¦¬ì ì¸ì¦ë¨";
        document.getElementById("statusChip").style.color = "#6ea8ff";
        document.getElementById("loginBtn").style.display = "none";
        document.getElementById("logoutBtn").style.display = "block";
        ids.forEach(id => document.getElementById(id).classList.add("unlocked"));
        btnIds.forEach(id => document.getElementById(id).classList.add("active"));
      } else {
        if (user) { 
          alert("ê¶Œí•œì´ ì—†ëŠ” ê³„ì •ì…ë‹ˆë‹¤. eundang@gmail.comìœ¼ë¡œ ë‹¤ì‹œ ë¡œê·¸ì¸í•´ ì£¼ì„¸ìš”.");
          signOut(auth); 
        }
        document.getElementById("loginBtn").style.display = "block";
        document.getElementById("logoutBtn").style.display = "none";
        document.getElementById("userInfo").innerText = "ì ‘ì† ëŒ€ê¸° ì¤‘...";
        document.getElementById("statusChip").innerText = "GUEST";
        ids.forEach(id => document.getElementById(id).classList.remove("unlocked"));
        btnIds.forEach(id => document.getElementById(id).classList.remove("active"));
      }
    });
  </script>
</body>
</html>
